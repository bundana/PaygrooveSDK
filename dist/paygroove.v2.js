(()=>{"use strict";({616:function(){var e=this&&this.__assign||function(){return e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},e.apply(this,arguments)},t=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};!function(n,i){var o={},a="https://secure.paygroove.com";o.initializing=!1,o.initializePayment=function(s){if(o.initializing)console.warn("PayGroove: Payment is already initializing.");else{o.initializing=!0;var l=i.createElement("div");l.style.position="fixed",l.style.top="0",l.style.left="0",l.style.width="100%",l.style.height="100%",l.style.backgroundColor="rgba(0, 0, 0, 0.5)",l.style.zIndex="9998";var c=i.createElement("div");c.innerHTML="\n<svg width=\"50\" height=\"50\"\nxmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'><linearGradient id='a11'><stop offset='0' stop-color='#000000' stop-opacity='0'></stop><stop offset='1' stop-color='#000000'></stop></linearGradient><circle fill='none' stroke='url(#a11)' stroke-width='26' stroke-linecap='round' stroke-dasharray='0 44 0 44 0 44 0 44 0 360' cx='100' cy='100' r='70' transform-origin='center'><animateTransform type='rotate' attributeName='transform' calcMode='discrete' dur='2' values='360;324;288;252;216;180;144;108;72;36' repeatCount='indefinite'></animateTransform></circle></svg>",c.style.position="fixed",c.style.top="50%",c.style.left="50%",c.style.transform="translate(-50%, -50%)",c.style.zIndex="10000";var u=function(){[l,c,g,v].forEach((function(e){i.body.contains(e)&&i.body.removeChild(e)})),n.removeEventListener("resize",P),n.removeEventListener("message",S,!1),o.initializing=!1},y=function(){return function(e){return encodeURIComponent(e)}(i.referrer||n.location.href||"Direct Access")},d=["amount","currency","public_key","email"].filter((function(e){return!s[e]}));if(d.length>0)return s.onFailure&&s.onFailure({error:"Missing required fields",details:d,referrer:y()}),void u();s.testPayment&&(a="http://127.0.0.1:8000");var f=function(e){return btoa(JSON.stringify(e))},p=(f({email:s.email,phone:s.phone,firstName:s.firstName,lastName:s.lastName}),y()),h={public_key:s.public_key,amount:s.amount,currency:s.currency,reference:s.reference||"",phone:s.phone||"",firstName:s.firstName||"",lastName:s.lastName||"",testPayment:s.testPayment||!1,description:s.description||"",channels:JSON.stringify(s.channels||[]),metadata:JSON.stringify(s.metadata||{}),expiring:s.expiring||"",referrer:p},m=f(h),b=new URLSearchParams({public_key:s.public_key,amount:s.amount.toString(),currency:s.currency,reference:s.reference||"",phone:s.phone||"",firstName:s.firstName||"",lastName:s.lastName||"",testPayment:s.testPayment?"true":"false",description:s.description||"",channels:JSON.stringify(s.channels||[]),metadata:JSON.stringify(s.metadata||{}),expiring:s.expiring||"",referrer:p}).toString(),g=(m||b.toString(),i.createElement("iframe"));g.style.position="fixed",g.style.top="50%",g.style.left="50%",g.style.transform="translate(-50%, -50%)",g.style.border="none",g.style.zIndex="9999",g.style.backgroundColor="#ffffff",g.style.display="none",g.setAttribute("allow","payment"),g.setAttribute("title","PayGroove Payment");var v=i.createElement("button");v.innerHTML="&times;",v.style.position="fixed",v.style.top="20px",v.style.right="20px",v.style.fontSize="30px",v.style.color="#fff",v.style.background="rgba(0, 0, 0, 0.5)",v.style.borderRadius="50%",v.style.width="40px",v.style.height="40px",v.style.border="none",v.style.cursor="pointer",v.style.zIndex="10001",v.style.display="none",v.setAttribute("aria-label","Close Payment Window"),v.setAttribute("tabindex","0");var w,x,k,N=function(){n.innerWidth<=768?(g.style.width="100vw",g.style.height="100vh",g.style.borderRadius="0",g.style.boxShadow="none",v.style.display="none"):(g.style.width="100%",g.style.height="100%",g.style.maxWidth="none",g.style.maxHeight="none",g.style.borderRadius="0",g.style.boxShadow="none",v.style.display="block")},P=(w=N,x=150,function(){void 0!==k&&clearTimeout(k),k=n.setTimeout(w,x)});N(),n.addEventListener("resize",P),v.onclick=F,i.body.appendChild(l),i.body.appendChild(c),i.body.appendChild(g),n.innerWidth>768&&i.body.appendChild(v),function(){return t(this,void 0,void 0,(function(){var e,t,n,i,o;return r(this,(function(r){switch(r.label){case 0:e=btoa(s.public_key),r.label=1;case 1:return r.trys.push([1,6,,7]),[4,fetch("".concat(a,"/checkout/initialize"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({token:m})})];case 2:return(t=r.sent()).ok?[3,4]:[4,t.json()];case 3:throw n=r.sent(),i=n.message||"Failed to create order",s.onFailure&&s.onFailure({error:i}),u(),new Error(i);case 4:return[4,t.json()];case 5:return[2,r.sent()];case 6:throw o=r.sent(),s.onFailure&&s.onFailure({error:"Server error",details:o.message,referrer:p}),u(),o;case 7:return[2]}}))}))}().then((function(e){var t,r=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.reference;e&&(null==e?void 0:e.data)&&r?(g.src="".concat(a,"/checkout/momo/").concat(encodeURIComponent(r)),g.onload=function(){c.style.display="none",g.style.display="block",v.style.display=n.innerWidth>=768?"block":"none"}):(s.onFailure&&s.onFailure({error:"Invalid order response",referrer:p}),u())})).catch((function(e){}));var S=function(t){if(t.origin===a)try{var r=void 0;if("string"==typeof t.data)r=JSON.parse(t.data);else{if("object"!=typeof t.data)throw new Error("Unexpected message format");r=t.data}switch(r.type){case"cancel-payment":F();break;case"payment-success":s.onSuccess&&s.onSuccess(e(e({},r.payload),{referrer:p})),u();break;case"payment-failure":s.onFailure&&s.onFailure(e(e({},r.payload),{referrer:p})),u();break;case"payment-error":s.onFailure&&s.onFailure({error:"Payment Error",details:r.payload,referrer:p}),u()}}catch(e){s.onFailure&&s.onFailure({error:"Message Processing Error",details:e.message,referrer:p})}else console.error("PayGroove: Received message from untrusted origin")};n.addEventListener("message",S,!1)}function F(){s.onFailure&&s.onFailure({error:"Payment Cancelled",details:"User closed the payment window",referrer:p}),u()}},n.PayGroove=o}(window,document)}})[616]()})();